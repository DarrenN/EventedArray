// Generated by CoffeeScript 1.6.3
(function() {
  var addDeadSong, addSong, buffer, bufferSongs, deadSongs, getter, onDeadSongsAdd, onSongAdd, onSongRemove, popSong, registerListener, remover, root, setter, songs,
    __slice = [].slice;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  registerListener = function(list, f) {
    return list.push(f);
  };

  buffer = function(size, coll, set, remove) {
    return function(item) {
      set(item);
      if (coll.length > size) {
        remove();
      }
      return coll;
    };
  };

  setter = function(coll, listeners) {
    return function() {
      var items;
      items = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      items.forEach(function(i) {
        coll.push(i);
        if (listeners != null) {
          return listeners.forEach(function(l) {
            return l(i);
          });
        }
      });
      return coll;
    };
  };

  remover = function(coll, listeners) {
    return function() {
      var o;
      o = coll.shift();
      if (listeners != null) {
        listeners.forEach(function(l) {
          return l(o);
        });
      }
      return coll;
    };
  };

  getter = function(coll, listeners) {
    return function(index) {
      var i;
      i = coll[index] != null ? coll[index] : void 0;
      if (listeners != null) {
        listeners.forEach(function(l) {
          return l(i);
        });
      }
      return i;
    };
  };

  deadSongs = [];

  onDeadSongsAdd = [];

  registerListener(onDeadSongsAdd, function(s) {
    return console.log("" + s + " was moved into Dead Songs");
  });

  addDeadSong = setter(deadSongs, onDeadSongsAdd);

  songs = [];

  onSongAdd = [];

  onSongRemove = [];

  registerListener(onSongAdd, function(s) {
    return console.log("" + s + " was added");
  });

  registerListener(onSongRemove, function(s) {
    return addDeadSong(s);
  });

  addSong = setter(songs, onSongAdd);

  popSong = remover(songs, onSongRemove);

  bufferSongs = buffer(5, songs, addSong, popSong);

  ['Only Love Will Break Your Heart', 'Ring of Fire', 'Mother We Share', 'Royals', 'Anarchy in the UK', 'Eric B. is President', 'Modern Man', 'Gun', 'Hey Ladies', 'One Velvet Morning', 'Oblivion'].forEach(function(s) {
    return bufferSongs(s);
  });

  root.songs = songs;

  root.deadSongs = deadSongs;

}).call(this);
